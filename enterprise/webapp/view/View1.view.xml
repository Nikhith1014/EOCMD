<mvc:View
    controllerName="enterprise.controller.View1"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:f="sap.f"
    xmlns:core="sap.ui.core"
    xmlns:card="sap.f.cards"
    xmlns:l="sap.ui.layout"
    xmlns:viz="sap.viz.ui5.controls"
    xmlns:vizData="sap.viz.ui5.data"
    xmlns:vizFeeds="sap.viz.ui5.controls.common.feeds"
    displayBlock="true"
>
    <App>
        <pages>
            <Page showHeader="false">
                <!--  APPLICATION TITLE (ONLY ONE) -->
                <Title
                    text="{i18n>appTitle}"
                    level="H2"
                    class="pageHeader"
                />

                <!--  MAIN CONTENT -->
                <VBox class="dashboardPage">
                    <!--  KPI CARDS SECTION -->

                    <l:Grid
                        width="100%"
                        defaultSpan="L6 M6 S12"
                        class="kpiRow"
                    >
                        <GenericTile
                            class="kpiCard"
                            header="Total Customers"
                            press=".onNavToCustomers"
                        >
                            <TileContent>
                                <NumericContent
                                    value="{dashboard>/totalCustomers}"
                                    icon="sap-icon://group"
                                    withMargin="false"
                                />
                            </TileContent>
                        </GenericTile>

                        <GenericTile
                            class="kpiCard"
                            header="Total Orders"
                            press=".onNavToOrders"
                        >
                            <TileContent>
                                <NumericContent
                                    value="{dashboard>/totalOrders}"
                                    icon="sap-icon://sales-order"
                                    withMargin="false"
                                />
                            </TileContent>
                        </GenericTile>
                    </l:Grid>

                    <!--  CHARTS SECTION -->
                    <l:Grid
                        width="100%"
                        defaultSpan="L6 M12 S12"
                        class="chartRow"
                    >
                        <!-- Bar Chart -->
                        <VBox class="chartCard">
                            <Title text="Orders Per Customer" />
                            <viz:VizFrame
                                id="barChart"
                                vizType="column"
                                height="350px"
                                width="100%"
                            >
                                <viz:dataset>
                                    <vizData:FlattenedDataset
                                        data="{dashboard>/ordersPerCustomer}"
                                    >
                                        <vizData:dimensions>
                                            <vizData:DimensionDefinition
                                                name="Customer"
                                                value="{name}"
                                            />
                                        </vizData:dimensions>
                                        <vizData:measures>
                                            <vizData:MeasureDefinition
                                                name="Orders"
                                                value="{orders}"
                                            />
                                        </vizData:measures>
                                    </vizData:FlattenedDataset>
                                </viz:dataset>
                                <viz:feeds>
                                    <vizFeeds:FeedItem
                                        uid="categoryAxis"
                                        type="Dimension"
                                        values="Customer"
                                    />
                                    <vizFeeds:FeedItem
                                        uid="valueAxis"
                                        type="Measure"
                                        values="Orders"
                                    />
                                </viz:feeds>
                            </viz:VizFrame>
                        </VBox>

                        <!-- Donut Chart -->
                        <VBox class="chartCard">
                            <Title text="Order Status Overview" />
                            <viz:VizFrame
                                id="donutChart"
                                vizType="donut"
                                height="350px"
                                width="100%"
                            >
                                <viz:dataset>
                                    <vizData:FlattenedDataset
                                        data="{dashboard>/orderStatus}"
                                    >
                                        <vizData:dimensions>
                                            <vizData:DimensionDefinition
                                                name="Status"
                                                value="{status}"
                                            />
                                        </vizData:dimensions>
                                        <vizData:measures>
                                            <vizData:MeasureDefinition
                                                name="Count"
                                                value="{count}"
                                            />
                                        </vizData:measures>
                                    </vizData:FlattenedDataset>
                                </viz:dataset>
                                <viz:feeds>
                                    <vizFeeds:FeedItem
                                        uid="size"
                                        type="Measure"
                                        values="Count"
                                    />
                                    <vizFeeds:FeedItem
                                        uid="color"
                                        type="Dimension"
                                        values="Status"
                                    />
                                </viz:feeds>
                            </viz:VizFrame>
                        </VBox>
                    </l:Grid>
                </VBox>
            </Page>
        </pages>
    </App>
</mvc:View>
